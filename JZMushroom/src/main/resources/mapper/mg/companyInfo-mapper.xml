<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jz.crm.mappers.mg.CompanyInfoMapper">
	<!--
		WARNING - @mbggenerated
		This element is automatically generated by Zqgame Generator, do not modify.
		This element was generated on 2017-01-03 15:12:23.
	-->
	<resultMap id="BaseResultMap" type="com.jz.crm.models.mg.CompanyInfo">
		<result column="as_mg_company_info_id" property="id" jdbcType="BIGINT" />
		<result column="as_mg_company_info_company_key_no" property="companyKeyNo" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_company_name" property="companyName" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_company_short_name" property="companyShortName" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_company_type" property="companyType" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_company_adress" property="companyAdress" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_phone" property="phone" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_web_site" property="webSite" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_introduction" property="introduction" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_logo" property="logo" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_compress_logo" property="compressLogo" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_qr_code" property="qrCode" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_compress_qr_code" property="compressQrCode" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_remark" property="remark" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_create_by" property="createBy" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_create_time" property="createTime" jdbcType="TIMESTAMP" />
		<result column="as_mg_company_info_update_by" property="updateBy" jdbcType="VARCHAR" />
		<result column="as_mg_company_info_update_time" property="updateTime" jdbcType="TIMESTAMP" />
	</resultMap>
	
	<!-- hr红包书 菜单栏 -->
	<resultMap id="RedBookMenu" type="com.jz.crm.models.rb.dto.RedBookMenu">
		<result column="as_mg_company_info_company_type" property="companyType" jdbcType="VARCHAR" />
	</resultMap>
	
	<!-- 行业、录入统计 -->
	<resultMap id="statistics" type="com.jz.crm.models.mg.dto.ReportStatisticsDto">
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="value" property="value" jdbcType="INTEGER" />
	</resultMap>
	
	<select id="getDataPageBy" resultMap="BaseResultMap" parameterType="java.util.HashMap">
			SELECT
			<include refid="Base_Column_List" />
			FROM  mg_company_info as_mg_company_info  ${where} ${order}
	</select>
	<select id="getDataBy" resultMap="BaseResultMap" parameterType="java.util.HashMap">
			SELECT
			<include refid="Base_Column_List" />
			FROM  mg_company_info as_mg_company_info  ${where} ${order} ${limit} ${for_update}
	</select>
	<select id="getTotalCountBy" parameterType="java.util.HashMap" resultType="java.lang.Long">
		SELECT COUNT(*) FROM  mg_company_info as_mg_company_info  ${where}
	</select>
	<select id="getSumBy" parameterType="java.util.HashMap" resultType="java.lang.Double">
		SELECT SUM(${sumField}) FROM  mg_company_info as_mg_company_info  ${where}
	</select>
	<select id="getById" resultMap="BaseResultMap" parameterType="java.util.HashMap">
			SELECT
			<include refid="Base_Column_List" />
			FROM  mg_company_info as_mg_company_info 
			WHERE as_mg_company_info.id = #{key_value,jdbcType=BIGINT} ${for_update}
	</select>
	<select id="getByIds" resultMap="BaseResultMap" parameterType="java.util.HashMap">
			SELECT
			<include refid="Base_Column_List" />
			FROM  mg_company_info as_mg_company_info  WHERE
			as_mg_company_info.id IN
			<foreach collection="list" item="ids" open="(" separator="," close=")">
				#{ids,jdbcType=BIGINT} 
			</foreach>
			${for_update}
	</select>
	<insert id="insert" parameterType="com.jz.crm.models.mg.CompanyInfo"  useGeneratedKeys="true" keyProperty="id">
			<selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER">
				SELECT LAST_INSERT_ID()
			</selectKey>
			INSERT INTO mg_company_info
			<trim prefix="(" suffix=")" suffixOverrides=",">
				<if test="id != null">
					`id`,
				</if>
				<if test="companyKeyNo != null">
					`company_key_no`,
				</if>
				<if test="companyName != null">
					`company_name`,
				</if>
				<if test="companyShortName != null">
					`company_short_name`,
				</if>
				<if test="companyType != null">
					`company_type`,
				</if>
				<if test="companyAdress != null">
					`company_adress`,
				</if>
				<if test="phone != null">
					`phone`,
				</if>
				<if test="webSite != null">
					`web_site`,
				</if>
				<if test="introduction != null">
					`introduction`,
				</if>
				<if test="logo != null">
					`logo`,
				</if>
				<if test="compressLogo != null">
					`compress_logo`,
				</if>
				<if test="qrCode != null">
					`qr_code`,
				</if>
				<if test="compressQrCode != null">
					`compress_qr_code`,
				</if>
				<if test="remark != null">
					`remark`,
				</if>
				<if test="createBy != null">
					`create_by`,
				</if>
				<if test="createTime != null">
					`create_time`,
				</if>
				<if test="updateBy != null">
					`update_by`,
				</if>
				<if test="updateTime != null">
					`update_time`,
				</if>
			</trim>
			<trim prefix="values (" suffix=")" suffixOverrides=",">
				<if test="id != null">
					#{id,jdbcType=BIGINT},
				</if>
				<if test="companyKeyNo != null">
					#{companyKeyNo,jdbcType=VARCHAR},
				</if>
				<if test="companyName != null">
					#{companyName,jdbcType=VARCHAR},
				</if>
				<if test="companyShortName != null">
					#{companyShortName,jdbcType=VARCHAR},
				</if>
				<if test="companyType != null">
					#{companyType,jdbcType=VARCHAR},
				</if>
				<if test="companyAdress != null">
					#{companyAdress,jdbcType=VARCHAR},
				</if>
				<if test="phone != null">
					#{phone,jdbcType=VARCHAR},
				</if>
				<if test="webSite != null">
					#{webSite,jdbcType=VARCHAR},
				</if>
				<if test="introduction != null">
					#{introduction,jdbcType=VARCHAR},
				</if>
				<if test="logo != null">
					#{logo,jdbcType=VARCHAR},
				</if>
				<if test="compressLogo != null">
					#{compressLogo,jdbcType=VARCHAR},
				</if>
				<if test="qrCode != null">
					#{qrCode,jdbcType=VARCHAR},
				</if>
				<if test="compressQrCode != null">
					#{compressQrCode,jdbcType=VARCHAR},
				</if>
				<if test="remark != null">
					#{remark,jdbcType=VARCHAR},
				</if>
				<if test="createBy != null">
					#{createBy,jdbcType=VARCHAR},
				</if>
				<if test="createTime != null">
					#{createTime,jdbcType=TIMESTAMP},
				</if>
				<if test="updateBy != null">
					#{updateBy,jdbcType=VARCHAR},
				</if>
				<if test="updateTime != null">
					#{updateTime,jdbcType=TIMESTAMP},
				</if>
			</trim>
	</insert>
	<update id="update" parameterType="com.jz.crm.models.mg.CompanyInfo">
			UPDATE  mg_company_info as_mg_company_info 
			<set>
			<trim suffixOverrides=",">
				<if test="id != null">
					as_mg_company_info.id=#{id,jdbcType=BIGINT},
				</if>
				<if test="companyKeyNo != null">
					as_mg_company_info.company_key_no=#{companyKeyNo,jdbcType=VARCHAR},
				</if>
				<if test="companyName != null">
					as_mg_company_info.company_name=#{companyName,jdbcType=VARCHAR},
				</if>
				<if test="companyShortName != null">
					as_mg_company_info.company_short_name=#{companyShortName,jdbcType=VARCHAR},
				</if>
				<if test="companyType != null">
					as_mg_company_info.company_type=#{companyType,jdbcType=VARCHAR},
				</if>
				<if test="companyAdress != null">
					as_mg_company_info.company_adress=#{companyAdress,jdbcType=VARCHAR},
				</if>
				<if test="phone != null">
					as_mg_company_info.phone=#{phone,jdbcType=VARCHAR},
				</if>
				<if test="webSite != null">
					as_mg_company_info.web_site=#{webSite,jdbcType=VARCHAR},
				</if>
				<if test="introduction != null">
					as_mg_company_info.introduction=#{introduction,jdbcType=VARCHAR},
				</if>
				<if test="logo != null">
					as_mg_company_info.logo=#{logo,jdbcType=VARCHAR},
				</if>
				<if test="compressLogo != null">
					as_mg_company_info.compress_logo=#{compressLogo,jdbcType=VARCHAR},
				</if>
				<if test="qrCode != null">
					as_mg_company_info.qr_code=#{qrCode,jdbcType=VARCHAR},
				</if>
				<if test="compressQrCode != null">
					as_mg_company_info.compress_qr_code=#{compressQrCode,jdbcType=VARCHAR},
				</if>
				<if test="remark != null">
					as_mg_company_info.remark=#{remark,jdbcType=VARCHAR},
				</if>
				<if test="createBy != null">
					as_mg_company_info.create_by=#{createBy,jdbcType=VARCHAR},
				</if>
				<if test="createTime != null">
					as_mg_company_info.create_time=#{createTime,jdbcType=TIMESTAMP},
				</if>
				<if test="updateBy != null">
					as_mg_company_info.update_by=#{updateBy,jdbcType=VARCHAR},
				</if>
				<if test="updateTime != null">
					as_mg_company_info.update_time=#{updateTime,jdbcType=TIMESTAMP},
				</if>
			</trim>
		</set>
			WHERE as_mg_company_info.id=#{id,jdbcType=BIGINT}
	</update>
	<update id="updateBy" parameterType="java.util.HashMap">
			UPDATE  mg_company_info as_mg_company_info 
			<set>
			<trim suffixOverrides=",">
				<if test="id != null">
					as_mg_company_info.id=#{entity.id,jdbcType=BIGINT},
				</if>
				<if test="companyKeyNo != null">
					as_mg_company_info.company_key_no=#{entity.companyKeyNo,jdbcType=VARCHAR},
				</if>
				<if test="companyName != null">
					as_mg_company_info.company_name=#{entity.companyName,jdbcType=VARCHAR},
				</if>
				<if test="companyShortName != null">
					as_mg_company_info.company_short_name=#{entity.companyShortName,jdbcType=VARCHAR},
				</if>
				<if test="companyType != null">
					as_mg_company_info.company_type=#{entity.companyType,jdbcType=VARCHAR},
				</if>
				<if test="companyAdress != null">
					as_mg_company_info.company_adress=#{entity.companyAdress,jdbcType=VARCHAR},
				</if>
				<if test="phone != null">
					as_mg_company_info.phone=#{entity.phone,jdbcType=VARCHAR},
				</if>
				<if test="webSite != null">
					as_mg_company_info.web_site=#{entity.webSite,jdbcType=VARCHAR},
				</if>
				<if test="introduction != null">
					as_mg_company_info.introduction=#{entity.introduction,jdbcType=VARCHAR},
				</if>
				<if test="logo != null">
					as_mg_company_info.logo=#{entity.logo,jdbcType=VARCHAR},
				</if>
				<if test="compressLogo != null">
					as_mg_company_info.compress_logo=#{entity.compressLogo,jdbcType=VARCHAR},
				</if>
				<if test="qrCode != null">
					as_mg_company_info.qr_code=#{entity.qrCode,jdbcType=VARCHAR},
				</if>
				<if test="compressQrCode != null">
					as_mg_company_info.compress_qr_code=#{entity.compressQrCode,jdbcType=VARCHAR},
				</if>
				<if test="remark != null">
					as_mg_company_info.remark=#{entity.remark,jdbcType=VARCHAR},
				</if>
				<if test="createBy != null">
					as_mg_company_info.create_by=#{entity.createBy,jdbcType=VARCHAR},
				</if>
				<if test="createTime != null">
					as_mg_company_info.create_time=#{entity.createTime,jdbcType=TIMESTAMP},
				</if>
				<if test="updateBy != null">
					as_mg_company_info.update_by=#{entity.updateBy,jdbcType=VARCHAR},
				</if>
				<if test="updateTime != null">
					as_mg_company_info.update_time=#{entity.updateTime,jdbcType=TIMESTAMP},
				</if>
			</trim>
		</set>
			${where}
	</update>
	<delete id="delete" parameterType="java.lang.String">
			DELETE as_mg_company_info FROM mg_company_info as_mg_company_info WHERE as_mg_company_info.id = #{id,jdbcType=BIGINT}
	</delete>
	<delete id="deleteByIds" parameterType="java.util.List">
			DELETE as_mg_company_info FROM mg_company_info as_mg_company_info where as_mg_company_info.id IN
			<foreach collection="list" item="item" open="(" separator="," close=")">
				#{item,jdbcType=BIGINT}
			</foreach>
	</delete>
	<delete id="deleteBy" parameterType="java.util.HashMap">
			DELETE as_mg_company_info FROM mg_company_info as_mg_company_info ${where}
	</delete>
	<sql id="Base_Column_List">
			as_mg_company_info.id as as_mg_company_info_id,
			as_mg_company_info.company_key_no as as_mg_company_info_company_key_no,
			as_mg_company_info.company_name as as_mg_company_info_company_name,
			as_mg_company_info.company_short_name as as_mg_company_info_company_short_name,
			as_mg_company_info.company_type as as_mg_company_info_company_type,
			as_mg_company_info.company_adress as as_mg_company_info_company_adress,
			as_mg_company_info.phone as as_mg_company_info_phone,
			as_mg_company_info.web_site as as_mg_company_info_web_site,
			as_mg_company_info.introduction as as_mg_company_info_introduction,
			as_mg_company_info.logo as as_mg_company_info_logo,
			as_mg_company_info.compress_logo as as_mg_company_info_compress_logo,
			as_mg_company_info.qr_code as as_mg_company_info_qr_code,
			as_mg_company_info.compress_qr_code as as_mg_company_info_compress_qr_code,
			as_mg_company_info.remark as as_mg_company_info_remark,
			as_mg_company_info.create_by as as_mg_company_info_create_by,
			as_mg_company_info.create_time as as_mg_company_info_create_time,
			as_mg_company_info.update_by as as_mg_company_info_update_by,
			as_mg_company_info.update_time as as_mg_company_info_update_time
	</sql>

	<!-- 自定义 -->
	
	<!--  -->
	<select id="getCompanysBy" resultMap="BaseResultMap"
		parameterType="java.util.HashMap">
		SELECT
		<include refid="Base_Column_List" />
		FROM mg_company_info as_mg_company_info where 1=1 
		<if test="companyType != null and companyType !=''">
			and	as_mg_company_info.company_type = #{companyType,jdbcType=VARCHAR}
		</if>
		<if test="createBy != null and createBy !=''">
			and	as_mg_company_info.create_by = #{createBy,jdbcType=VARCHAR}
		</if>
		order by as_mg_company_info.create_time desc limit #{currentPage},#{showCount} 
	</select>
	<select id="getCompanysCountBy" resultType="int"
		parameterType="java.util.HashMap">
		SELECT
		Count(*)
		FROM mg_company_info as_mg_company_info where 1=1 
		<if test="companyType != null and companyType !=''">
			and	as_mg_company_info.company_type = #{companyType,jdbcType=VARCHAR}
		</if>
		<if test="createBy != null and createBy !=''">
			and	as_mg_company_info.create_by = #{createBy,jdbcType=VARCHAR}
		</if>
	</select>
	
	<!--  -->
	<select id="getDataListBy" resultMap="BaseResultMap"
		parameterType="java.util.HashMap">
		SELECT
		<include refid="Base_Column_List" />
		FROM mg_company_info as_mg_company_info where 1=1 
		<if test="companyName != null and companyName !=''">
			and	(as_mg_company_info.company_name LIKE CONCAT('%' ,#{companyName,jdbcType=VARCHAR}, '%') )
		</if>
		order by as_mg_company_info.create_time desc limit #{currentPage},#{showCount} 
	</select>
	<select id="getDataListByCount" resultType="int"
		parameterType="java.util.HashMap">
		SELECT
		Count(*)
		FROM mg_company_info as_mg_company_info where 1=1 
		<if test="companyName != null and companyName !=''">
			and	(as_mg_company_info.company_name LIKE CONCAT('%' ,#{companyName,jdbcType=VARCHAR}, '%') )
		</if> 
	</select>
	
	<!-- hr红宝书 菜单栏 -->
	<select id="redBookMenuList"  resultMap="RedBookMenu"  parameterType="java.util.HashMap">
		 select DISTINCT as_mg_company_info.company_type as as_mg_company_info_company_type from mg_company_info as_mg_company_info
	</select>
	
	<!-- 行业统计 -->
	<select id="industryStatistics"  resultMap="statistics"  parameterType="java.util.HashMap">
		 select count(*) as value,as_mg_company_info.company_type as name from mg_company_info as_mg_company_info group by as_mg_company_info.company_type
	</select>
	
	<!-- 录入统计 -->
	<select id="inputStatistics"  resultMap="statistics"  parameterType="java.util.HashMap">
		 select count(*) as value,as_mg_company_info.create_by as name from mg_company_info as_mg_company_info group by as_mg_company_info.create_by
	</select>
</mapper>